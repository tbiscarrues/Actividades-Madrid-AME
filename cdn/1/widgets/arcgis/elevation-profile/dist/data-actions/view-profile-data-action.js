System.register(["jimu-core"],(function(e,t){var o={};return{setters:[function(e){o.AbstractDataAction=e.AbstractDataAction,o.AllDataSourceTypes=e.AllDataSourceTypes,o.DataLevel=e.DataLevel,o.DataSourceStatus=e.DataSourceStatus,o.MutableStoreManager=e.MutableStoreManager,o.getAppStore=e.getAppStore}],execute:function(){e((()=>{var e={79244:e=>{"use strict";e.exports=o}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="";var r={};return n.p=window.jimuConfig.baseUrl,(()=>{"use strict";n.r(r),n.d(r,{default:()=>o});var e=n(79244),t=function(e,t,o,n){return new(o||(o=Promise))((function(r,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function u(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,u)}l((n=n.apply(e,t||[])).next())}))};class o extends e.AbstractDataAction{isSupported(o,n){return t(this,void 0,void 0,(function*(){var t,r,i,a,u,l,d;if(o.length>1)return!1;const s=o[0],c=s.dataSource,p=function(){var t,o,n;return window.jimuConfig.isBuilder?null===(o=null===(t=(0,e.getAppStore)().getState())||void 0===t?void 0:t.appStateInBuilder)||void 0===o?void 0:o.appConfig:null===(n=(0,e.getAppStore)().getState())||void 0===n?void 0:n.appConfig}(),v=null===(t=null==p?void 0:p.widgets)||void 0===t?void 0:t[this.widgetId],f=null===(i=null===(r=v.config)||void 0===r?void 0:r.configInfo)||void 0===i?void 0:i[null===(a=null==v?void 0:v.config)||void 0===a?void 0:a.activeDataSource],S=(null==f?void 0:f.hasOwnProperty("advanceOptions"))?null==f?void 0:f.advanceOptions:null===(u=null==f?void 0:f.profileSettings)||void 0===u?void 0:u.isProfileSettingsEnabled;if(!S)return!1;if(S&&(null===(l=null==f?void 0:f.profileSettings)||void 0===l?void 0:l.isCustomizeOptionEnabled)&&0===(null===(d=null==f?void 0:f.profileSettings)||void 0===d?void 0:d.layers.length))return!1;if(!c||c.getStatus()===e.DataSourceStatus.NotReady)return!1;return!(!(null==c?void 0:c.supportSpatialInfo)||!(null==c?void 0:c.supportSpatialInfo()))&&(n===e.DataLevel.Records&&(("WEB_MAP"===c.type||"WEB_SCENE"===c.type||(c.type===e.AllDataSourceTypes.FeatureLayer||c.type===e.AllDataSourceTypes.SubtypeSublayer)&&"esriGeometryPolyline"===c.getGeometryType())&&(s.records.length>0&&n===e.DataLevel.Records&&("current"===s.type||"selected"===s.type))))}))}onExecute(o){return t(this,void 0,void 0,(function*(){const{records:t}=o[0];return e.MutableStoreManager.getInstance().updateStateValue(this.widgetId,"selectedFeatureRecords",t),!0}))}}})(),r})())}}}));