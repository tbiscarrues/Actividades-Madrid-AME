System.register(["jimu-core","jimu-arcgis","jimu-theme","jimu-ui","esri/widgets/Daylight","esri/widgets/Daylight/DaylightViewModel","esri/widgets/Weather","esri/widgets/ShadowCast","esri/widgets/ShadowCast/ShadowCastViewModel","esri/widgets/LineOfSight","esri/widgets/LineOfSight/LineOfSightViewModel","esri/widgets/Slice","esri/widgets/Slice/SliceViewModel","esri/core/reactiveUtils","esri/analysis/SlicePlane","esri/analysis/SliceAnalysis","esri/Viewpoint"],(function(e,t){var a={},n={},o={},i={},l={},s={},r={},c={},d={},u={},p={},f={},g={},m={},v={},w={},h={};return{setters:[function(e){a.BaseVersionManager=e.BaseVersionManager,a.Immutable=e.Immutable,a.React=e.React,a.ReactRedux=e.ReactRedux,a.appActions=e.appActions,a.classNames=e.classNames,a.css=e.css,a.focusElementInKeyboardMode=e.focusElementInKeyboardMode,a.hooks=e.hooks,a.jsx=e.jsx},function(e){n.JimuMapViewComponent=e.JimuMapViewComponent},function(e){o.useTheme=e.useTheme},function(e){i.Button=e.Button,i.FOCUSABLE_CONTAINER_CLASS=e.FOCUSABLE_CONTAINER_CLASS,i.Label=e.Label,i.Loading=e.Loading,i.LoadingType=e.LoadingType,i.Popper=e.Popper,i.Tooltip=e.Tooltip,i.WidgetPlaceholder=e.WidgetPlaceholder,i.defaultMessages=e.defaultMessages,i.useTrapFocusByBoundaryNodes=e.useTrapFocusByBoundaryNodes},function(e){l.default=e.default},function(e){s.default=e.default},function(e){r.default=e.default},function(e){c.default=e.default},function(e){d.default=e.default},function(e){u.default=e.default},function(e){p.default=e.default},function(e){f.default=e.default},function(e){g.default=e.default},function(e){m.watch=e.watch,m.whenOnce=e.whenOnce},function(e){v.default=e.default},function(e){w.default=e.default},function(e){h.default=e.default}],execute:function(){e((()=>{var e={95653:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"><path fill="#000" fill-rule="evenodd" d="M18 6.733 8.462.374 1 6.77v8.709l7.473 4.076L18 15.513zM8 2.087 2 7.23v7.655l6 3.273zm1 16.158 8-3.394V7.268L9 1.934z" clip-rule="evenodd"></path></svg>'},61685:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 17 17"><path fill="#000" fill-rule="evenodd" d="M13.777 5.508C13.208 2.138 11.38 0 8.997 0l-.032.002a8 8 0 1 0 7.986 8.863A2 2 0 0 0 17 8.453c0-.048-.013-.092-.016-.139C16.988 8.21 17 8.105 17 8c0-1.137-1.084-1.974-3.223-2.491zm-4.81-4.506L8.999 1q.352.002.692.092c.081.022.156.06.235.089q.21.07.405.171.141.082.273.18.16.107.308.231.147.131.28.278.121.127.235.27.143.18.274.382.241.375.428.78c.04.087.076.18.113.27.082.2.162.404.23.622.022.07.04.145.06.216.072.25.142.505.196.777.064.316.121.638.159.98l-1.124.612c-.259-2.341-1.209-4.35-2.338-4.35-1.874 0-2.625 4.24-2.334 6.894l-1.977 1.077A20 20 0 0 1 5.03 9.48C5.01 9.097 5 8.732 5 8.456 5 4.02 6.776 1.03 8.967 1.002M8.332 8.82l-.093.05c-.15-1.033.329-4.27 1.295-4.27.583 0 1.111 1.976 1.244 2.887L8.247 8.865zM9 15A6.994 6.994 0 0 1 5.835 1.767 11.26 11.26 0 0 0 4 8.456c0 .545.038 1.475.12 2.225l.003.01v.01c.002.018.01.033.014.05a1 1 0 0 0 .06.208q.021.044.045.087c.094.16.226.295.383.394q.014.009.026.018.102.053.215.08l.012.005c1.35.312 2.73.466 4.116.457h.007a16 16 0 0 0 5.289-.809 7 7 0 0 0 1.197-.563A7.01 7.01 0 0 1 9 15m6.964-6.289zC15.604 9.994 12.619 10.998 9 11q-1.159 0-2.309-.148L8.813 9.7c.205.01.4.028.614.027 2.32 0 4.573-.662 4.573-1.505 0-.31-.385-.596-.925-.837l1.14-.62q.05.019.097.039a7 7 0 0 1 .553.269c.42.205.77.527 1.01.928h.011q.076.155.098.326l-.002.025a1 1 0 0 1 .018.101 1 1 0 0 1-.036.26z" clip-rule="evenodd"></path></svg>'},96300:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M15 7.5a.52.52 0 0 1-.516.527H2.976L6.473 11.6a.535.535 0 0 1 0 .746.51.51 0 0 1-.73 0L1 7.5l4.743-4.846a.51.51 0 0 1 .73 0 .535.535 0 0 1 0 .746L2.976 6.973h11.508c.285 0 .516.236.516.527"></path></svg>'},62838:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m8.745 8 6.1 6.1a.527.527 0 1 1-.745.746L8 8.746l-6.1 6.1a.527.527 0 1 1-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 0 1 .746-.746l6.1 6.1 6.1-6.1a.527.527 0 0 1 .746.746z"></path></svg>'},89948:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 17"><g clip-path="url(#a)"><path fill="#000" d="m12.153 6.054-.707-.707 2.2-2.2.708.707zm-9.507 8.092.707.707 2.2-2.2-.706-.707zm8.8-1.493 2.2 2.2.707-.706-2.2-2.2zM5.554 5.347l-2.2-2.2-.707.706 2.2 2.2zM9 1.5H8v3h1zm-1 15h1v-3H8zm8-7v-1h-3v1zm-15 0h3v-1H1zM5 9a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0m1 0a2.5 2.5 0 1 0 5 0 2.5 2.5 0 0 0-5 0"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 .5h16v16H0z"></path></clipPath></defs></svg>'},36786:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 17"><g clip-path="url(#a)"><path fill="#000" d="M8 6.5h1v1H8zm0 3h1v-1H8zm0 2h1v-1H8zm0 2h1v-1H8zm8 2v1H0v-1h6v-7H5v-1h1V5.072l5-3.57V15.5zm-6 0V3.444L7 5.587V15.5zm-6-4.605v-.842A3.37 3.37 0 0 1 .84 8.265a3.37 3.37 0 0 1 1.804-1.234c-.205.32-.317.692-.323 1.073a1.467 1.467 0 0 0 1.6 1.46c.027 0 .053-.005.08-.006v-3.45c-.04 0-.08-.008-.12-.008A5.27 5.27 0 0 0 .066 7.9a.37.37 0 0 0-.032.365A3.89 3.89 0 0 0 4 10.895M13 7.5h-1v1h1zm.354-2.288-.707.707 1.58 1.581H14v1h.27l-1.623 1.623.707.707L16 8.184v-.325z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 .5h16v16H0z"></path></clipPath></defs></svg>'},41330:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 17"><path fill="#000" fill-rule="evenodd" d="M15 8.5a7 7 0 1 1-14 0 7 7 0 0 1 14 0m1 0a8 8 0 1 1-16 0 8 8 0 0 1 16 0m-6-4H8v1h2zm2 7v-1H8v1zm-4 1h2v1H8zm4-6H8v1h4zm-4 2h5v1H8z" clip-rule="evenodd"></path></svg>'},82070:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 17"><g clip-path="url(#a)"><path fill="#000" d="M4.482 3.02 3.856.835l.96-.275.627 2.183a3.8 3.8 0 0 0-.961.275zM2.347 7.546a4 4 0 0 1-.09-.493l-2.196.63.275.96 2.196-.63a4 4 0 0 1-.185-.467m.33-2.89q.122-.219.272-.42l-1.79-.992-.484.875 1.802.999q.084-.237.2-.461zm5.166-1.48q.216.129.413.285l.999-1.803-.875-.483-.992 1.789q.234.09.455.213zM16 10a3.5 3.5 0 0 1-3.5 3.5h-9a2.492 2.492 0 0 1-.648-4.9c.065-.018.127-.042.194-.054.065-.338.199-.658.394-.941a2.765 2.765 0 0 1 4.23-3.337 3.97 3.97 0 0 1 6.26 2.544A3.5 3.5 0 0 1 16 10m-1 0a2.5 2.5 0 0 0-1.48-2.276l-.483-.218-.092-.522a2.99 2.99 0 0 0-5.857-.17l-.233.992-.987-.252A1.462 1.462 0 0 0 4.03 8.727l-.124.678-.678.124A1.498 1.498 0 0 0 3.5 12.5h9A2.503 2.503 0 0 0 15 10M4.241 6.84a2.42 2.42 0 0 1 1.874-.255c.143-.595.421-1.15.813-1.621-.02-.012-.035-.027-.055-.038a1.8 1.8 0 0 0-2.447.701c-.204.37-.27.8-.185 1.214z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 .5h16v16H0z"></path></clipPath></defs></svg>'},54948:e=>{"use strict";e.exports=h},11526:e=>{"use strict";e.exports=w},5338:e=>{"use strict";e.exports=v},62243:e=>{"use strict";e.exports=m},59455:e=>{"use strict";e.exports=l},95060:e=>{"use strict";e.exports=s},73507:e=>{"use strict";e.exports=u},36122:e=>{"use strict";e.exports=p},47642:e=>{"use strict";e.exports=c},60154:e=>{"use strict";e.exports=d},33893:e=>{"use strict";e.exports=f},1194:e=>{"use strict";e.exports=g},21587:e=>{"use strict";e.exports=r},62686:e=>{"use strict";e.exports=n},79244:e=>{"use strict";e.exports=a},1888:e=>{"use strict";e.exports=o},14321:e=>{"use strict";e.exports=i}},t={};function y(a){var n=t[a];if(void 0!==n)return n.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,y),o.exports}y.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return y.d(t,{a:t}),t},y.d=(e,t)=>{for(var a in t)y.o(t,a)&&!y.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},y.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),y.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},y.p="";var C={};return y.p=window.jimuConfig.baseUrl,(()=>{"use strict";y.r(C),y.d(C,{__set_webpack_public_path__:()=>ye,default:()=>he});var e,t,a,n,o,i,l,s=y(79244),r=y(62686),c=y(1888);!function(e){e.Daylight="daylight",e.Weather="weather",e.ShadowCast="shadowcast",e.LineOfSight="lineofsight",e.Slice="slice"}(e||(e={})),function(e){e.Date="date",e.Season="season"}(t||(t={})),function(e){e.SyncedWithMap="syncedWithMap",e.Spring="spring",e.Summer="summer",e.Fall="fall",e.Winter="winter"}(a||(a={})),function(e){e.Sunny="sunny",e.Cloudy="cloudy",e.Rainy="rainy",e.Snowy="snowy",e.Foggy="foggy"}(n||(n={})),function(e){e.Threshold="threshold",e.Duration="duration",e.Discrete="discrete"}(o||(o={})),function(e){e.List="list",e.Icon="icon"}(i||(i={})),function(e){e.Horizontal="horizontal",e.Vertical="vertical"}(l||(l={}));var d=y(14321);const u={_widgetLabel:"3D Toolbox",select3DScene:"Please select a 3D scene to active this widget",clearEffect:"Clear effect",clearAnalysis:"Clear analysis",showDevelopmentLayer:"Show development layer",showDevLayer:"Show development layer",allowTiltOnSlice:"Allow tilt on slice plane",excludedLayer:"Excluded layer",resetSlice:"Reset slice plane",clearSlice:"Clear Slice"};function p(e){const t=e.sys.color.surface.paper;e.sys.color.divider.secondary;return s.css`
    /*min-width: 300px;*/
    background-color: ${t};

    .tool-header {

      .label {
        font-weight: 600;
        font-size: 16px;
      }
    }

    .api-loader {
      position: absolute;
      height: 50%;
      left: 50%;
      z-index: 1;
    }

    .tool-content {
      min-width: 270px;
      min-height: 36px;
      overflow: auto;
      height: calc(100% - 32px);

      .esri-widget__heading {
        display: none;
      }

      /* min-height of widgets, for popper placement ,#13159 */
      .daylight-container {
        min-height: 200px;
      }
      .weather-container {
        min-height: 124px;
      }
      .shadowcast-container {
        min-height: 341px;
      }
      .lineofsight-container {
        min-height: 56px;
      }
      .slice-container {
        min-height: 56px;
      }

      .tool-footer {
        button {
          border: 1px solid ${e.sys.color.primary.main};
        }
      }
    }
  `}var f=y(59455),g=y(95060);const m=()=>{const e=s.React.useRef(null),t=s.React.useCallback((t=>{if(!e.current){const a=t.environment.lighting.clone();e.current=a}}),[]),a=s.React.useCallback((t=>{t&&e.current&&(t.environment.lighting=e.current),e.current=null}),[]),n=s.React.useRef(null);return{cacheDefaultLighting:t,restoreDefaultLighting:a,cacheDefaultWeather:s.React.useCallback((e=>{if(!n.current){const t=e.environment.weather.clone();n.current=t}}),[]),restoreDefaultWeather:s.React.useCallback((e=>{e&&n.current&&(e.environment.weather=n.current),n.current=null}),[])}};var v=y(21587);var w=y(47642),h=y(60154);var M=y(73507),S=y(36122);var j=y(33893),b=y(1194),x=y(62243),R=y(5338),O=y(11526),k=y(54948),V=function(e,t,a,n){return new(a||(a=Promise))((function(o,i){function l(e){try{r(n.next(e))}catch(e){i(e)}}function s(e){try{r(n.throw(e))}catch(e){i(e)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(l,s)}r((n=n.apply(e,t||[])).next())}))};const I=e=>{const{onUpdated:t,onShowResetSliceBtn:a,onShowCancelSlicingBtn:n}=e,o=s.React.useRef(null),i=s.React.useRef(null),l=s.React.useRef(null),r=s.React.useRef(null),{hasPresetAnalysisForThisMap:c,getAnalysisFromConfig:d,addAnalysesToView:u,removeAnalysesFromView:p}=(e=>{var t,a,n,o;const i=s.React.useCallback((()=>{var t;let a=null===(t=e.sliceConfig.analyses)||void 0===t?void 0:t.find((t=>{var a;return t.mapViewId===(null===(a=e.jimuMapView)||void 0===a?void 0:a.dataSourceId)}));return a||(a=null),a}),[e.sliceConfig,e.jimuMapView]),l=s.React.useCallback((()=>{let t=!1;return t=!(!e.sliceConfig.analyses||!i()),t}),[e.sliceConfig,i]),r=s.React.useCallback((()=>{var e;const t=null===(e=i())||void 0===e?void 0:e.mapViewId;return(null==t?void 0:t.startsWith("3d-toolbox-map-popper-"))?t.replace("3d-toolbox-map-popper-",""):t}),[i]),c=s.React.useCallback((()=>{var e;const t=null===(e=i())||void 0===e?void 0:e.viewpoint;return k.default.fromJSON(t)}),[i]),d=s.React.useCallback((t=>{let a=e.sliceConfig.analyses.filter((t=>t.mapViewId!==e.jimuMapView.dataSourceId));return a=a.concat(t),{analyses:a}}),[null===(t=e.jimuMapView)||void 0===t?void 0:t.dataSourceId,e.sliceConfig.analyses]),u=s.React.useCallback((()=>({analyses:e.sliceConfig.analyses.filter((t=>t.mapViewId!==e.jimuMapView.dataSourceId))})),[null===(a=e.jimuMapView)||void 0===a?void 0:a.dataSourceId,e.sliceConfig.analyses]),p=s.React.useCallback((e=>{let t=!1;return t=e===r(),t}),[r]),f=s.React.useCallback((e=>l()&&p(e)),[l,p]),g=s.React.useCallback((()=>{var e;let t=l(),a={},n=null;if(t){try{a=JSON.parse(null===(e=i())||void 0===e?void 0:e.analysis)}catch(e){t=!1,console.error(a)}const o=R.default.fromJSON(a);n=new O.default({shape:o})}return n}),[l,i]),m=s.React.useCallback(((t,a,n)=>V(void 0,void 0,void 0,(function*(){var o,i;const l=null===(o=e.jimuMapView)||void 0===o?void 0:o.view;yield x.whenOnce((()=>!l.updating));const s=n===r();if(l&&"3d"===(null==l?void 0:l.type)&&s&&t&&l.analyses.add(a),s&&t){const t=c();t&&(null===(i=e.jimuMapView)||void 0===i||i.view.goTo(t))}}))),[null===(n=e.jimuMapView)||void 0===n?void 0:n.view,r,c]),v=s.React.useCallback((t=>{var a,n;const o=null===(a=e.jimuMapView)||void 0===a?void 0:a.view;o&&t&&(null===(n=o.analyses)||void 0===n||n.remove(t),t.destroy(),t=null)}),[null===(o=e.jimuMapView)||void 0===o?void 0:o.view]);return{hasPresetAnalysisForThisMap:f,getPresetMapViewIdInConfig:r,getPresetViewpointInConfig:c,setPresetAnalysisInConfig:d,clearPresetAnalysisInConfig:u,getAnalysisFromConfig:g,addAnalysesToView:m,removeAnalysesFromView:v}})({jimuMapView:e.jimuMapView,sliceConfig:e.sliceConfig}),f=s.React.useCallback((e=>{const t=(e=>{let t=!1;return"exclude"===e?t=!0:"none"===e&&(t=!1),t})(e);a(!t)}),[a]),g=s.React.useCallback((s=>{var p,g;const m=null===(p=e.jimuMapView)||void 0===p?void 0:p.view,v=c(null===(g=e.jimuMapView)||void 0===g?void 0:g.dataSourceId),w={view:m,tiltEnabled:e.sliceConfig.tiltEnabled,excludeGroundSurface:e.sliceConfig.excludeGroundSurface};return v&&(i.current=d(),w.analysis=i.current),o.current=new j.default({container:s,view:m,viewModel:new b.default(w)}),o.current.when((()=>{t(),v?(a(!0),l.current=x.watch((()=>(null==o?void 0:o.current.viewModel).layersMode),(e=>{f(e)}))):a(!1),r.current=x.watch((()=>(null==o?void 0:o.current.viewModel).active),(e=>{const t=((e,t)=>{let a=!1;return"ready"===e&&t&&(a=!0),a})(null==o?void 0:o.current.viewModel.state,e);t?(n(!0),a(!1)):(n(!1),v&&f((null==o?void 0:o.current.viewModel).layersMode))})),u(v,i.current,e.jimuMapView.dataSourceId)})),o.current}),[e.jimuMapView,e.sliceConfig,c,d,u,t,a,n,f]),m=s.React.useCallback((()=>{var e,t;p(i.current),a(!1),n(!1),i.current=null,null===(e=null==l?void 0:l.current)||void 0===e||e.remove(),null===(t=null==r?void 0:r.current)||void 0===t||t.remove()}),[p,a,n]);return{sliceRef:o.current,updateSliceWidget:g,destroySliceWidget:m}};var B=y(96300),N=y.n(B),W=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a};const L=e=>{const t=window.SVG,{className:a}=e,n=W(e,["className"]),o=(0,s.classNames)("jimu-icon jimu-icon-component",a);return t?s.React.createElement(t,Object.assign({className:o,src:N()},n)):s.React.createElement("svg",Object.assign({className:o},n))},P=s.React.memo((o=>{var l,r,y;const C=(0,c.useTheme)(),j=s.hooks.useTranslation(u,d.defaultMessages),b=s.React.useRef(null),x=s.React.useRef(null),R=s.React.useRef(o.toolConfig.activedOnLoad);s.React.useEffect((()=>{R.current=o.toolConfig.activedOnLoad}),[o.toolConfig]);const[O,k]=s.React.useState(!0),{onPopperVersionUpdate:V}=o,B=s.React.useCallback((()=>{k(!1),"function"==typeof V&&V()}),[V]),[N,W]=s.React.useState(!1),[P,E]=s.React.useState(!1),{updateDaylightWidget:T,destroyDaylightWidget:z}=(e=>{const{cacheDefaultLighting:n,restoreDefaultLighting:o}=m(),{onUpdated:i}=e,l=s.React.useRef(null);s.React.useEffect((()=>{var e,t;null===(e=null==l?void 0:l.current)||void 0===e||e.viewModel.set("dayPlaying",!1),null===(t=null==l?void 0:l.current)||void 0===t||t.viewModel.set("yearPlaying",!1)}),[e.appMode]);const r=s.React.useCallback((o=>{var s,r;const c=null===(s=e.jimuMapView)||void 0===s?void 0:s.view;n(c);const d={view:c};return new g.default(d),l.current=new f.default({container:o,view:c,visibleElements:{timezone:e.daylightConfig.timezone,playButtons:e.daylightConfig.playButtons,datePicker:e.daylightConfig.datePicker,sunLightingToggle:e.daylightConfig.dateTimeToggle,shadowsToggle:e.daylightConfig.isShowShadows},timeSliderSteps:e.daylightConfig.timeSliderSteps,playSpeedMultiplier:e.daylightConfig.playSpeedMultiplier,dateOrSeason:null!==(r=e.daylightConfig.dateOrSeason)&&void 0!==r?r:t.Date}),l.current.when((()=>{i(),e.daylightConfig.dateOrSeason===t.Season&&e.daylightConfig.currentSeason!==a.SyncedWithMap&&l.current.viewModel.set("currentSeason",e.daylightConfig.currentSeason);const n=e.daylightConfig.dateTimeAutoPlay;e.daylightConfig.dateOrSeason===t.Season||l.current.viewModel.set("dayPlaying",n)})),l.current}),[e.jimuMapView,e.daylightConfig,n,i]),c=s.React.useCallback((()=>{o(e.jimuMapView.view)}),[e.jimuMapView,o]);return{daylightRef:l.current,updateDaylightWidget:r,destroyDaylightWidget:c}})({jimuMapView:o.jimuMapView,daylightConfig:o.toolConfig.config,onUpdated:B,appMode:o.appMode}),{updateWeatherWidget:A,destroyWeatherWidget:D}=(e=>{const{cacheDefaultWeather:t,restoreDefaultWeather:a}=m(),{onUpdated:o}=e,i=s.React.useRef(null),l=s.React.useMemo((()=>({cloudCover:.5,precipitation:.5,fogStrength:.5})),[]),r=s.React.useRef(null),c=s.React.useCallback(((t,a)=>{var o,i,s,r,c,d,u;switch(t){case n.Sunny:{const n=e.weatherConfig.sunnyConfig;a.environment.weather={type:t,cloudCover:null!==(o=null==n?void 0:n.cloudCover)&&void 0!==o?o:l.cloudCover};break}case n.Cloudy:{const n=e.weatherConfig.cloudyConfig;a.environment.weather={type:t,cloudCover:null!==(i=null==n?void 0:n.cloudCover)&&void 0!==i?i:l.cloudCover};break}case n.Rainy:{const n=e.weatherConfig.rainyConfig;a.environment.weather={type:t,cloudCover:null!==(s=null==n?void 0:n.cloudCover)&&void 0!==s?s:l.cloudCover,precipitation:null!==(r=null==n?void 0:n.precipitation)&&void 0!==r?r:l.precipitation};break}case n.Snowy:{const n=e.weatherConfig.snowyConfig;a.environment.weather={type:t,cloudCover:null!==(c=null==n?void 0:n.cloudCover)&&void 0!==c?c:l.cloudCover,precipitation:null!==(d=null==n?void 0:n.precipitation)&&void 0!==d?d:l.precipitation};break}case n.Foggy:{const n=e.weatherConfig.foggyConfig;a.environment.weather={type:t,fogStrength:null!==(u=null==n?void 0:n.fogStrength)&&void 0!==u?u:l.fogStrength};break}}}),[e.weatherConfig,l]),d=s.React.useCallback((a=>{var n;const l=null===(n=e.jimuMapView)||void 0===n?void 0:n.view;return t(l),c(e.weatherConfig.weatherType,l),i.current=new v.default({container:a,view:l}),i.current.when((()=>{o(),r.current=l.watch("environment.weather.type",(()=>{c(l.environment.weather.type,l)}))})),i.current}),[e.jimuMapView,e.weatherConfig.weatherType,c,t,o]),u=s.React.useCallback((()=>{var t;null===(t=null==r?void 0:r.current)||void 0===t||t.remove(),a(e.jimuMapView.view)}),[e.jimuMapView,a]);return{weatherRef:i.current,updateWeatherWidget:d,destroyWeatherWidget:u}})({jimuMapView:o.jimuMapView,weatherConfig:o.toolConfig.config,onUpdated:B}),{updateShadowCastWidget:H,destroyShadowCastWidget:U}=(e=>{const{onUpdated:t}=e,a=s.React.useRef(null),n=s.React.useCallback((n=>{var o,i;return a.current=new w.default({container:n,view:null===(o=e.jimuMapView)||void 0===o?void 0:o.view,visibleElements:{timezone:e.shadowCastConfig.timezone,datePicker:e.shadowCastConfig.datePicker},viewModel:new h.default({view:null===(i=e.jimuMapView)||void 0===i?void 0:i.view,visualizationType:e.shadowCastConfig.visType})}),a.current.when((()=>{t()})),a.current}),[e.jimuMapView,e.shadowCastConfig,t]),o=s.React.useCallback((()=>{}),[]);return{shadowCastRef:a.current,updateShadowCastWidget:n,destroyShadowCastWidget:o}})({jimuMapView:o.jimuMapView,shadowCastConfig:o.toolConfig.config,onUpdated:B}),{updateLineOfSightWidget:F,destroyLineOfSightWidget:_}=(e=>{const{onUpdated:t}=e,a=s.React.useRef(null),[n,o]=s.React.useState(!1),[i,l]=s.React.useState(!1);s.React.useEffect((()=>{n&&i&&t()}),[n,i,t]);const r=s.React.useCallback((t=>{var n,i;return a.current=new M.default({container:t,view:null===(n=e.jimuMapView)||void 0===n?void 0:n.view,viewModel:new S.default({view:null===(i=e.jimuMapView)||void 0===i?void 0:i.view})}),a.current.viewModel.watch("state",(e=>{"ready"===e&&l(!0)})),a.current.when((()=>{o(!0)})),a.current}),[e.jimuMapView]),c=s.React.useCallback((()=>{}),[]);return{lineOfSightRef:a.current,updateLineOfSightWidget:r,destroyLineOfSightWidget:c}})({jimuMapView:o.jimuMapView,lineOfSightConfig:o.toolConfig.config,onUpdated:B}),{updateSliceWidget:q,destroySliceWidget:G}=I({jimuMapView:o.jimuMapView,sliceConfig:o.toolConfig.config,onUpdated:B,onShowCancelSlicingBtn:W,onShowResetSliceBtn:E});function J(t){const a=document.createElement("div");return a.className=t+"-container w-100 ",t===e.Weather&&(a.className+="d-flex justify-content-center"),b.current.innerHTML="",b.current.appendChild(a),a}const $=s.React.useCallback((()=>{var t,a,n;if(null===(a=null===(t=x.current)||void 0===t?void 0:t.view)||void 0===a?void 0:a.map)switch(o.mode){case e.Daylight:z();break;case e.Weather:D();break;case e.ShadowCast:U();break;case e.LineOfSight:_();break;case e.Slice:G()}null===(n=null==x?void 0:x.current)||void 0===n||n.destroy(),x.current=null,(null==b?void 0:b.current)&&(b.current.innerHTML="")}),[o.mode,z,D,U,_,G]),K=s.React.useCallback((()=>{$();if(o.toolConfig.enable)switch(o.mode){case e.Daylight:x.current=T(J(o.mode));break;case e.Weather:x.current=A(J(o.mode));break;case e.ShadowCast:x.current=H(J(o.mode));break;case e.LineOfSight:x.current=F(J(o.mode));break;case e.Slice:x.current=q(J(o.mode))}}),[o.mode,o.toolConfig,$,T,A,H,F,q]);s.React.useEffect((()=>(o.useMapWidgetId||$(),()=>{$()})),[null===(l=o.jimuMapView)||void 0===l?void 0:l.view,o.useMapWidgetId,o.toolConfig,$,K]);const{onBackBtnClick:Q}=o;s.React.useEffect((()=>{var e,t;(null===(e=o.shownModeState)||void 0===e?void 0:e.id)===o.mode&&(R.current=!0),(null==R?void 0:R.current)?!x.current&&o.useMapWidgetId&&(null===(t=o.jimuMapView)||void 0===t?void 0:t.view)&&K():x.current&&$()}),[o.mode,o.useMapWidgetId,null===(r=o.jimuMapView)||void 0===r?void 0:r.view,o.shownModeState,o.toolConfig,$,K]);const X=s.React.useRef(null),Y=s.React.useRef(null);s.React.useEffect((()=>{var e;o.isShowBackBtn&&(null===(e=o.shownModeState)||void 0===e?void 0:e.id)===o.mode&&(0,s.focusElementInKeyboardMode)(null==X?void 0:X.current)}),[o.shownModeState,o.isShowBackBtn,o.mode]);const[Z,ee]=s.React.useState(0),te=s.React.useRef(null),ae=s.React.useRef(null);s.React.useEffect((()=>{o.arrangementStyle===i.List&&(te.current=X.current,ae.current=Y.current),ee((e=>e+1))}),[o.shownModeState,o.arrangementStyle,o.mode]),(0,d.useTrapFocusByBoundaryNodes)(te,ae,Z);const ne=(null===(y=o.shownModeState)||void 0===y?void 0:y.id)===o.mode,oe=o.mode===e.Daylight||o.mode===e.Weather?j("clearEffect"):j("clearAnalysis");return(0,s.jsx)("div",{className:"p-2 w-100 "+(ne?"d-block "+d.FOCUSABLE_CONTAINER_CLASS:"d-none"),css:p(C)},o.isShowBackBtn&&"function"==typeof Q&&(0,s.jsx)("div",{className:"tool-header d-flex align-items-center my-1"},(0,s.jsx)(d.Button,{ref:e=>{X.current=e},className:"",type:"tertiary",icon:!0,size:"sm",onClick:Q},(0,s.jsx)(L,{size:16,autoFlip:!0})),(0,s.jsx)(d.Label,{className:"label ml-1 my-0"},j(o.mode))),(0,s.jsx)("div",{className:"tool-content"},O&&(0,s.jsx)("div",{className:"api-loader m-2"},(0,s.jsx)(d.Loading,{type:d.LoadingType.Secondary})),(0,s.jsx)("div",{ref:b}),(0,s.jsx)("div",{className:"tool-footer w-100 px-4 mt-1 mb-2"},N&&(0,s.jsx)(d.Button,{type:"secondary",className:"w-100 mb-2",onClick:()=>{x.current.viewModel.clear()}},j("commonModalCancel")),P&&(0,s.jsx)(d.Button,{type:"secondary",className:"w-100 mb-2",onClick:()=>{K()}},j("resetSlice")),(0,s.jsx)(d.Button,{type:"secondary",className:"w-100",ref:e=>{Y.current=e},onClick:()=>{R.current=!1,Q()}},oe))))}));var E=y(89948),T=y.n(E),z=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a};const A=e=>{const t=window.SVG,{className:a}=e,n=z(e,["className"]),o=(0,s.classNames)("jimu-icon jimu-icon-component",a);return t?s.React.createElement(t,Object.assign({className:o,src:T()},n)):s.React.createElement("svg",Object.assign({className:o},n))};var D=y(82070),H=y.n(D),U=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a};const F=e=>{const t=window.SVG,{className:a}=e,n=U(e,["className"]),o=(0,s.classNames)("jimu-icon jimu-icon-component",a);return t?s.React.createElement(t,Object.assign({className:o,src:H()},n)):s.React.createElement("svg",Object.assign({className:o},n))};var _=y(41330),q=y.n(_),G=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a};const J=e=>{const t=window.SVG,{className:a}=e,n=G(e,["className"]),o=(0,s.classNames)("jimu-icon jimu-icon-component",a);return t?s.React.createElement(t,Object.assign({className:o,src:q()},n)):s.React.createElement("svg",Object.assign({className:o},n))};var $=y(36786),K=y.n($),Q=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a};const X=e=>{const t=window.SVG,{className:a}=e,n=Q(e,["className"]),o=(0,s.classNames)("jimu-icon jimu-icon-component",a);return t?s.React.createElement(t,Object.assign({className:o,src:K()},n)):s.React.createElement("svg",Object.assign({className:o},n))};var Y=y(61685),Z=y.n(Y),ee=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a};const te=e=>{const t=window.SVG,{className:a}=e,n=ee(e,["className"]),o=(0,s.classNames)("jimu-icon jimu-icon-component",a);return t?s.React.createElement(t,Object.assign({className:o,src:Z()},n)):s.React.createElement("svg",Object.assign({className:o},n))},ae=s.React.memo((t=>{const a=s.hooks.useTranslation(u,d.defaultMessages),[n,o]=s.React.useState(null),i=s.React.useRef(null),l=s.React.useCallback(((e,t)=>{o(e);const a=t.currentTarget,n=a.dataset.id?a:a.parentElement;i.current=n}),[]);s.hooks.useUpdateEffect((()=>{r()}),[t.appMode]);const r=s.React.useCallback((()=>{o(null)}),[]);s.React.useEffect((()=>{null===n&&(0,s.focusElementInKeyboardMode)(null==i?void 0:i.current)}),[n]);const c=s.React.useCallback((t=>{if(!t.enable)return null;const n=a(""+t.id);let o=null;switch(t.id){case e.Daylight:o=(0,s.jsx)(A,null);break;case e.Weather:o=(0,s.jsx)(F,null);break;case e.ShadowCast:o=(0,s.jsx)(J,null);break;case e.LineOfSight:o=(0,s.jsx)(X,null);break;case e.Slice:o=(0,s.jsx)(te,null)}return(0,s.jsx)(d.Button,{className:"list-item d-flex align-items-center pl-2 py-1 my-4 w-100 jimu-outline-inside justify-content-start",type:"tertiary",title:n,role:"listitem",key:t.id,"data-id":t.id,onClick:e=>{l(t,e)}},(0,s.jsx)("div",{className:"d-flex list-item-icon mx-2"},o),(0,s.jsx)("div",{className:"d-flex list-item-name"},n))}),[a,l]);return(0,s.jsx)(s.React.Fragment,null,(0,s.jsx)("div",{className:"list-item-container border-0 d-flex h-100",role:"list"},(0,s.jsx)("div",{className:(0,s.classNames)("main-list w-100 ",{hide:null!==n})},t.toolsConfig.map((e=>c(e)))),(0,s.jsx)(P,{mode:e.Daylight,toolConfig:t.findToolConfigById(e.Daylight),useMapWidgetId:t.useMapWidgetId,jimuMapView:t.jimuMapView,shownModeState:n,isShowBackBtn:!0,onBackBtnClick:r,appMode:t.appMode,arrangementStyle:t.arrangementStyle}),(0,s.jsx)(P,{mode:e.Weather,toolConfig:t.findToolConfigById(e.Weather),useMapWidgetId:t.useMapWidgetId,jimuMapView:t.jimuMapView,shownModeState:n,isShowBackBtn:!0,onBackBtnClick:r,appMode:t.appMode,arrangementStyle:t.arrangementStyle}),(0,s.jsx)(P,{mode:e.ShadowCast,toolConfig:t.findToolConfigById(e.ShadowCast),useMapWidgetId:t.useMapWidgetId,jimuMapView:t.jimuMapView,shownModeState:n,isShowBackBtn:!0,onBackBtnClick:r,appMode:t.appMode,arrangementStyle:t.arrangementStyle}),(0,s.jsx)(P,{mode:e.LineOfSight,toolConfig:t.findToolConfigById(e.LineOfSight),useMapWidgetId:t.useMapWidgetId,jimuMapView:t.jimuMapView,shownModeState:n,isShowBackBtn:!0,onBackBtnClick:r,appMode:t.appMode,arrangementStyle:t.arrangementStyle}),(0,s.jsx)(P,{mode:e.Slice,toolConfig:t.findToolConfigById(e.Slice),useMapWidgetId:t.useMapWidgetId,jimuMapView:t.jimuMapView,shownModeState:n,isShowBackBtn:!0,onBackBtnClick:r,appMode:t.appMode,arrangementStyle:t.arrangementStyle})))}));function ne(e){const t=e.sys.color.surface.paper;e.sys.color.divider.secondary;return s.css`
    /* List mode */
    .list-item-container {
      background-color: ${t};
      overflow: auto;

      .main-list {

      }

      .hide {
        display: none !important;
      }

      .list-item {
        height: 38px;
        min-width: 240px;

        &:hover {
          background-color: ${e.ref.palette.neutral[200]};
        }

        .list-item-icon {

        }
        .list-item-name {

        }
      }
    }

    /* Icon mode */
    .icon-item-container {
      background-color: ${t};

      .icon-item {
        width: 32px;
        height: 32px;
      }
    }
  `}function oe(e){const t=e.sys.color.surface.paper;e.sys.color.divider.secondary;return s.css`
    .popper-header {
      background-color: ${t};

      .popper-title {
        margin-bottom: 0;
        font-weight: 600;
        font-size: 16px;
      }
    }
    .popper-content {
      width: 350px;
    }
  `}var ie=y(62838),le=y.n(ie),se=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a};const re=e=>{const t=window.SVG,{className:a}=e,n=se(e,["className"]),o=(0,s.classNames)("jimu-icon jimu-icon-component",a);return t?s.React.createElement(t,Object.assign({className:o,src:le()},n)):s.React.createElement("svg",Object.assign({className:o},n))},ce=s.React.memo((t=>{const a=(0,c.useTheme)(),n=s.hooks.useTranslation(u,d.defaultMessages),o=s.React.useRef(null),[i,r]=s.React.useState(null),[p,f]=s.React.useState(!1),g=s.React.useRef(null);s.hooks.useUpdateEffect((()=>{m()}),[t.appMode]);const m=s.React.useCallback((()=>{r(null),(0,s.focusElementInKeyboardMode)(null==g?void 0:g.current),f(!1)}),[]);s.React.useEffect((()=>(g.current=null,()=>{m()})),[t.toolsConfig,m]);const v=s.React.useCallback(((e,t)=>{let a=!1;("pageOrSizeMode"===t||e&&e.key&&"Escape"===(null==e?void 0:e.key))&&(a=!0),a&&m()}),[m]),[w,h]=s.React.useState(0),y=s.React.useCallback((()=>{h((e=>e+1))}),[h]);s.React.useEffect((()=>{y()}),[p,y]);const C=t.findToolConfigById,M=s.React.useCallback((t=>{if(!t.enable)return null;const a=n(""+t.id);let l=null;switch(t.id){case e.Daylight:l=(0,s.jsx)(A,null);break;case e.Weather:l=(0,s.jsx)(F,null);break;case e.ShadowCast:l=(0,s.jsx)(J,null);break;case e.LineOfSight:l=(0,s.jsx)(X,null);break;case e.Slice:l=(0,s.jsx)(te,null)}return(0,s.jsx)("div",{className:"icon-item d-flex",key:t.id},(0,s.jsx)(d.Button,{type:"tertiary",className:"w-100",size:"sm",icon:!0,active:(null==i?void 0:i.id)===t.id,title:a,"data-id":t.id,onClick:e=>{const t=e.currentTarget,a=t.dataset.id?t:t.parentElement;o.current=a;const n=o.current.dataset.id;r(C(n)),g.current=a,f(!!n)}},l))}),[i,n,C]),S=s.React.useCallback((e=>{var t;null==e||e.stopPropagation(),null===(t=null==e?void 0:e.nativeEvent)||void 0===t||t.stopPropagation()}),[]),j=t.direction===l.Horizontal?"flex-row":"flex-column";return(0,s.jsx)(s.React.Fragment,null,(0,s.jsx)("div",{className:"icon-item-container border-0 d-flex p-1 "+j,onClick:S},t.toolsConfig.map((e=>M(e)))),(0,s.jsx)(d.Popper,{reference:o.current,placement:t.direction===l.Vertical?"right":"bottom",offsetOptions:12,arrowOptions:!0,open:p,keepMount:!0,version:w,toggle:v,autoFocus:!0,forceLatestFocusElements:!0},(0,s.jsx)("div",{className:"content-container",css:oe(a)},(0,s.jsx)("div",{className:"popper-header d-flex px-4 pt-2 align-items-center justify-content-between "+d.FOCUSABLE_CONTAINER_CLASS},(0,s.jsx)(d.Label,{className:"popper-title mt-0 py-1"},n((null==i?void 0:i.id)?i.id:"_widgetLabel")),(0,s.jsx)(d.Button,{className:"print-button p-0",type:"tertiary",size:"sm",icon:!0,onClick:m},(0,s.jsx)(re,null))),(0,s.jsx)("div",{className:"popper-content"},(0,s.jsx)(P,{mode:e.Daylight,toolConfig:t.findToolConfigById(e.Daylight),useMapWidgetId:t.useMapWidgetId,jimuMapView:t.jimuMapView,shownModeState:i,onBackBtnClick:m,appMode:t.appMode,onPopperVersionUpdate:y}),(0,s.jsx)(P,{mode:e.Weather,toolConfig:t.findToolConfigById(e.Weather),useMapWidgetId:t.useMapWidgetId,jimuMapView:t.jimuMapView,shownModeState:i,onBackBtnClick:m,appMode:t.appMode,onPopperVersionUpdate:y}),(0,s.jsx)(P,{mode:e.ShadowCast,toolConfig:t.findToolConfigById(e.ShadowCast),useMapWidgetId:t.useMapWidgetId,jimuMapView:t.jimuMapView,shownModeState:i,onBackBtnClick:m,appMode:t.appMode,onPopperVersionUpdate:y}),(0,s.jsx)(P,{mode:e.LineOfSight,toolConfig:t.findToolConfigById(e.LineOfSight),useMapWidgetId:t.useMapWidgetId,jimuMapView:t.jimuMapView,shownModeState:i,onBackBtnClick:m,appMode:t.appMode,onPopperVersionUpdate:y}),(0,s.jsx)(P,{mode:e.Slice,toolConfig:t.findToolConfigById(e.Slice),useMapWidgetId:t.useMapWidgetId,jimuMapView:t.jimuMapView,shownModeState:i,onBackBtnClick:m,appMode:t.appMode,onPopperVersionUpdate:y})))))})),de=s.React.memo((e=>{const t=(0,c.useTheme)(),a=s.ReactRedux.useSelector((e=>e.appRuntimeInfo.appMode));function n(t){return(0,s.Immutable)(e.config.tools.find((e=>e.id===t)))}return(0,s.jsx)("div",{className:"h-100",css:ne(t)},e.config.arrangement.style===i.List&&(0,s.jsx)(ae,{toolsConfig:e.config.tools,findToolConfigById:n,useMapWidgetId:e.useMapWidgetId,jimuMapView:e.jimuMapView,appMode:a,arrangementStyle:e.config.arrangement.style}),e.config.arrangement.style===i.Icon&&(0,s.jsx)(ce,{direction:e.config.arrangement.direction,toolsConfig:e.config.tools,findToolConfigById:n,useMapWidgetId:e.useMapWidgetId,jimuMapView:e.jimuMapView,appMode:a}))}));var ue=y(95653),pe=y.n(ue);const fe={crossAxis:!0},ge=s.React.memo((e=>{const t=s.hooks.useTranslation(u,d.defaultMessages),a=((0,c.useTheme)(),t("select3DMapHint")),n=e.arrangement.style===i.List,o=e.arrangement.direction===l.Horizontal?"bottom":"right";return(0,s.jsx)(s.React.Fragment,null,(0,s.jsx)(d.Tooltip,{disableHoverListener:n,disableTouchListener:n,disableFocusListener:n,placement:o,shiftOptions:fe,showArrow:!0,title:(0,s.jsx)("div",{className:"p-2",style:{background:"var(--ref-palette-neutral-300)",border:"1px solid var(--ref-palette-neutral-700)"}},a),arrowStyle:{background:"var(--ref-palette-neutral-300)",border:{color:"var(--ref-palette-neutral-700)",width:"1px"}}},(0,s.jsx)("div",{className:(0,s.classNames)("h-100",{"hide-msg":!n,"in-controller":e.isInController}),css:s.css`
    &.hide-msg {
      .message-wrapper {
        display: none;
      }
    }
    &.in-controller {
      .thumbnail-wrapper {
        min-height: 42px;
        min-width: 170px;
      }
    }
  `},(0,s.jsx)(d.WidgetPlaceholder,{widgetId:e.widgetId,icon:pe(),title:a,message:n?a:null}))))}));class me extends s.BaseVersionManager{constructor(){super(...arguments),this.versions=[{version:"1.11.0",description:"support version manager for Slice ,#12467",upgrader:e=>{const t=e.tools.concat([{id:"slice",enable:!1,activedOnLoad:!1,config:{tiltEnabled:!1,excludeGroundSurface:!0,analyses:[]}}]);return e=e.setIn(["tools"],t)}}]}}const ve=new me,we=e=>{var t,a;const n=null===(t=e.useMapWidgetIds)||void 0===t?void 0:t[0];s.hooks.useEffectOnce((()=>{const{layoutId:t,layoutItemId:a,id:n,dispatch:o}=e;o(s.appActions.widgetStatePropChange(n,"layoutInfo",{layoutId:t,layoutItemId:a}))}));const[o,i]=s.React.useState(null),l=s.React.useCallback((e=>{var t;"3d"===(null===(t=null==e?void 0:e.view)||void 0===t?void 0:t.type)?i(e):i(null)}),[]),c=!(n&&"3d"===(null===(a=null==o?void 0:o.view)||void 0===a?void 0:a.type));return(0,s.jsx)("div",{className:"widget-3d-toolbox jimu-widget h-100"},c&&(0,s.jsx)(ge,{widgetId:e.id,arrangement:e.config.arrangement,isInController:!!e.controllerWidgetId}),!c&&o&&(0,s.jsx)(de,{config:e.config,useMapWidgetId:n,jimuMapView:o}),n&&(0,s.jsx)(r.JimuMapViewComponent,{useMapWidgetId:n,onActiveViewChange:l}))};we.versionManager=ve;const he=we;function ye(e){y.p=e}})(),C})())}}}));